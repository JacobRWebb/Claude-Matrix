# Matrix Deep Research

Deep Research is Matrix's multi-source research pipeline that aggregates information from web searches, documentation databases, local memory, and code repositories to produce comprehensive technical reports.

---

## Overview

Traditional research involves switching between Google, Stack Overflow, official docs, and GitHub. Deep Research automates this by:

1. Expanding your query into related sub-queries
2. Gathering information from multiple sources in parallel
3. Fetching and extracting relevant content
4. Synthesizing findings into a structured markdown report

The result is a complete technical document with sources cited, best practices identified, and common pitfalls highlighted.

---

## The Five-Phase Pipeline

### Phase 1: Query Expansion

Before searching, the query is analyzed to maximize coverage:

**Input:** "How to implement OAuth with Google in Next.js"

**Expansion:**
- Core topic: OAuth 2.0, Google authentication
- Related queries:
  - "Google OAuth Next.js setup"
  - "NextAuth Google provider"
  - "OAuth 2.0 PKCE flow"
- Technical domains: Next.js, React, OAuth, Google APIs

This ensures the research captures different angles of the same problem.

### Phase 2: Multi-Source Gathering

Information is collected from multiple sources in parallel:

**Web Search**
- Recent articles and tutorials
- Authoritative sources (official docs, reputable blogs)
- Community discussions (Stack Overflow, Reddit)

**Context7 Documentation**
- Library/framework official documentation
- API references and examples
- Up-to-date (continuously indexed)

**Matrix Memory**
- Past solutions you've stored
- Related failures to avoid
- Patterns from similar projects

**GitHub Repositories**
- Implementation examples from authoritative repos
- Real-world patterns from production code
- Uses semantic search to find relevant files

**Extended Sources** (exhaustive depth only)
- GitHub Issues and Discussions
- Targeted Stack Overflow searches

### Phase 3: Content Fetching

Promising URLs from web search are fetched and processed:

1. HTML converted to clean markdown
2. Code blocks extracted and preserved
3. Key information summarized
4. Source URLs noted for citations

Large pages are intelligently truncated, keeping the most relevant sections.

### Phase 4: Synthesis

All gathered information is combined:

**Deduplication**
- Similar information from multiple sources merged
- Conflicting approaches identified and noted

**Organization**
- Grouped by subtopic or theme
- Progressive from basics to advanced

**Analysis**
- Consensus approaches highlighted
- Best practices extracted
- Anti-patterns and pitfalls documented

### Phase 5: Output

A polished markdown document is generated:

```markdown
# Research: [Topic]

> Generated by Matrix Deep Research
> Depth: standard

## Summary
[2-3 sentence overview]

## Key Findings
### [Subtopic 1]
[Content with code examples]

### [Subtopic 2]
[Content with code examples]

## Best Practices
- [Practice 1]
- [Practice 2]

## Common Pitfalls
- [Pitfall 1]
- [Pitfall 2]

## Code Examples
[Consolidated, working examples]

## Sources
1. [Source 1](url)
2. [Source 2](url)
```

---

## Depth Levels

### Quick (~500 words)
- 2-3 sources consulted
- Surface-level coverage
- Best for: Quick facts, simple questions, sanity checks

### Standard (~1500 words)
- 4-5 sources consulted
- Balanced depth and breadth
- Best for: Implementation guidance, learning new concepts

### Exhaustive (~3000+ words)
- 6+ sources consulted
- Deep analysis including edge cases
- Best for: Critical decisions, complex architectures, security-sensitive topics

---

## Source Integration

### Web Search
Matrix uses Claude's WebSearch tool to find recent, relevant content. Results are ranked by:
- Recency (newer content preferred)
- Authority (official docs > personal blogs)
- Relevance to expanded queries

### Context7
For library documentation, Context7 provides:
- Continuously updated docs (faster than cached web results)
- API-specific information
- Code examples from official sources

The flow:
1. `resolve-library-id`: Find the library in Context7's index
2. `query-docs`: Retrieve relevant documentation sections

### Matrix Memory
Past solutions are searched semantically:
- Your stored patterns for similar problems
- Failures you've recorded (what NOT to do)
- Repository-specific context

This personalizes research with your own experience.

### GitHub via Repomix
For implementation patterns:
1. Repository is indexed (lightweight metadata only)
2. Semantic search suggests relevant files
3. User confirms which files to include
4. Selected files are packed into context

This brings real implementation code into the research.

---

## Output Location

Reports are saved to the session directory when available:
```
$CLAUDE_SESSION_DIR/matrix-research-[slug]-[timestamp].md
```

Fallback location:
```
./matrix-research-[slug]-[timestamp].md
```

The slug is derived from your query, making reports easy to find later.

---

## Usage Examples

**Learning a new framework:**
```
/matrix:deep-research "React Server Components best practices" standard
```

**Security implementation:**
```
/matrix:deep-research "how to implement OAuth 2.0 with PKCE" exhaustive
```

**Quick reference:**
```
/matrix:deep-research TypeScript generics quick
```

**Architecture decisions:**
```
/matrix:deep-research "comparing state management solutions Redux vs Zustand" exhaustive
```

---

## How It Differs from Regular Web Search

| Aspect | Regular Search | Deep Research |
|--------|----------------|---------------|
| Sources | Single (Google/Bing) | Multiple (Web + Docs + Memory + Code) |
| Processing | Raw results | Synthesized findings |
| Output | List of links | Structured document |
| Personalization | None | Includes your past solutions |
| Code Examples | Scattered | Consolidated and verified |
| Citations | Manual tracking | Automatic source list |

---

## Best Practices for Queries

**Be Specific**
- "React hooks" (too broad)
- "React useEffect cleanup patterns" (specific)

**Include Context**
- "authentication" (vague)
- "JWT authentication in Express.js middleware" (contextual)

**Specify Constraints**
- "database design" (generic)
- "PostgreSQL schema design for multi-tenant SaaS" (constrained)

**State Your Goal**
- "Docker" (what about it?)
- "Docker multi-stage builds for Node.js production deployment" (goal-oriented)

---

## Integration with Matrix Memory

Research often surfaces patterns worth remembering. After completing research:

1. **Store valuable patterns** - Use `matrix_store` for techniques you'll reuse
2. **Record pitfalls** - Use `matrix_failure` for mistakes to avoid
3. **Link related solutions** - Connect new findings to existing memory

This creates a feedback loop where research improves your personal knowledge base.

---

## Limitations

- **Rate limits** - Web searches and API calls have limits
- **Recency** - Some sources may be outdated despite filtering
- **Token budget** - Very large research may be truncated
- **Language** - Primarily optimized for English technical content

---

## Summary

Deep Research transforms a question into a comprehensive technical document by:
1. Expanding the query for broader coverage
2. Gathering from web, docs, memory, and code
3. Fetching and extracting relevant content
4. Synthesizing into organized findings
5. Outputting a citable markdown report

It replaces hours of manual research with a structured, personalized, and source-cited document.
